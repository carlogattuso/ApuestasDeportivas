<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

    <title>MGame</title>
</head>
<style>
    .jumbotron {
        background-color: #FFD000;
        color: #000;
        padding: 100px 25px;
    }
    h1 {
        font-size: 40px;
    }
    .auto {
        display: none;
    }
    p.serif {
        font-family: "Times New Roman", Times, serif;
        font-size: 40px;
    }
    .bg-grey {
        background-color: #f6f6f6;
    }
    .container-fluid {
        padding: 60px 50px;
    }
    .logo {
        font-size: 200px;
        color: #FFD000;
    }
    @media screen and (max-width: 768px) {
        .col-sm-4 {
            text-align: center;
            margin: 25px 0;
        }
    }
    .logo-small {
        color: #FFD000;
        font-size: 50px;
    }
    .thumbnail {
        padding: 0 0 15px 0;
        border: none;
        border-radius: 0;
    }
    .thumbnail img {
        width: 100%;
        height: 100%;
        margin-bottom: 10px;
    }
    .carousel-control.right, .carousel-control.left {
        background-image: none;
        color: #FFD000;
    }
    .carousel-indicators li {
        border-color: #FFD000;
    }
    .carousel-indicators li.active {
        background-color: #FFD000;
    }
    .item h4 {
        font-size: 19px;
        line-height: 1.375em;
        font-weight: 400;
        font-style: italic;
        margin: 70px 0;
    }
    .item span {
        font-style: normal;
    }
    .navbar {
        margin-bottom: 0;
        background-color: #FFD000;
        z-index: 9999;
        border: 0;
        font-size: 12px !important;
        line-height: 1.42857143 !important;
        letter-spacing: 4px;
        border-radius: 0;
    }
    .navbar li a, .navbar .navbar-brand {
        color: #000 !important;
    }
    .navbar-nav li a:hover, .navbar-nav li.active a {
        color: #FFD000 !important;
        background-color: #000 !important;
    }
    .navbar-default .navbar-toggle {
        border-color: transparent;
        color: #000 !important;
    }
</style>
<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">

<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar" id="mybets"></span>
            </button>
            <a class="navbar-brand" href="#myPage" id="usuario"></a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#matchday">MATCH DAY</a></li>
                <li><a href="#mybets">MyBETS</a></li>
            </ul>
        </div>
    </div>
</nav>
<div class="jumbotron ">
    <div class="col-sm-4 text-center">
        <img src="https://scontent-mad1-1.xx.fbcdn.net/v/t1.0-9/54362954_2300961806623193_5794743092347142144_n.jpg?_nc_cat=108&_nc_ht=scontent-mad1-1.xx&oh=d3b45667708c208d91e279dce83468ab&oe=5D173132" alt="New York" width="200" height="150">
    </div>
    <h1><b>MGame</b></h1>
</div>
<div class="container-fluid bg-grey text-center">
    <div class="row">
        <div class="col-sm-1">
            <H3 class="serif">SALDO:</H3>
        </div>
        <div class="col-sm-1">
            <h3 id="saldo" class="serif"></h3>
        </div>
    </div>
</div>
<div id="matchday" class="container-fluid text-center">
    <p class="serif">MATCH DAY</p>
    <table class="table table-striped" id="tabla_jornada">
        <thead>
        <tr class="bg-info">
            <th class="text-center">ID</th>
            <th class="text-center">Fecha</th>
            <th class="text-center">Local</th>
            <th class="text-center">Visitante</th>
            <th class="text-center">Cuota_1</th>
            <th class="text-center">Cuota_X</th>
            <th class="text-center">Cuota_2</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
<div class="container-fluid bg-grey text-center">
    <div class="row">
        <div class="col-sm-6">
            <button class="btn btn-default btn-lg btn-info" id="create_bet">Create BET</button>
        </div>
        <div class="col-sm-6">
            <button class="btn btn-default btn-lg btn-info" id="mybetsbutton">MyBETS</button>
        </div>
    </div>
</div>
<div id="mybets_container" class="auto container-fluid text-center">
    <p class="serif">MY BETS</p>
    <table class="table table-striped" id="tabla_mybets">
        <thead>
        <tr class="bg-info">
            <th class="text-center">idPartido</th>
            <th class="text-center">Pronostico</th>
            <th class="text-center">Importe</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
<div id="create_container" class="auto container-fluid text-center">
    <p class="serif">Create BET</p>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-2"></div>
        <div class="col-sm-2">
            <form class="form-horizontal" action="/action_page.php">
                <div class="form-group">
                    <label class="control-label" for="usuario">Match Id:</label>
                    <input type="text" class="form-control" id="matchId_field" placeholder="Enter Match Id">
                </div>
                <div class="form-group">
                    <label class="control-label" for="pwd">Amount:</label>
                    <input type="text" class="form-control" id="amount_field" placeholder="Enter amount">
                </div>
            </form>z
        </div>
        <div class="col-sm-2">
            <form class="form-horizontal" action="/action_page.php">
                <label class="control-label" for="email">Forecast:</label>
                <div class="radio">
                    <label><input type="radio" name="optradio" value="1">1</label>
                </div>
                <div class="radio">
                    <label><input type="radio" name="optradio" value="X">X</label>
                </div>
                <div class="radio">
                    <label><input type="radio" name="optradio" value="2">2</label>
                </div>
                <p></p>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button id="create_bet_button" type="button" class="btn btn-default">Submit</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="col-sm-2"></div>
        <div class="col-sm-2"></div>
    </div>
</div>
</body>
<script>
    $(document).ready(function(){
        var matchIdArray = [];
        // Add smooth scrolling to all links in navbar + footer link
        $(".navbar a, footer a[href='#myPage']").on('click', function(event) {
            // Make sure this.hash has a value before overriding default behavior
            if (this.hash !== ""){
                // Prevent default anchor click behavior
                event.preventDefault();
                // Store hash
                var hash = this.hash;
                // Using jQuery's animate() method to add smooth page scroll
                // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
                $('html, body').animate({
                    scrollTop: $(hash).offset().top
                }, 900, function(){
                    // Add hash (#) to URL when done scrolling (default click behavior)
                    window.location.hash = hash;
                });
            } // End if
        });
        $.get("http://localhost:9000/Application/getUsername", function (data) {
            var name = data.username;
            document.getElementById('usuario').innerHTML = name;
        }, "json");
        $.get("http://localhost:9000/Application/getSaldo", function (data) {
            var saldo = data.toString();
            document.getElementById('saldo').innerHTML = saldo;
            console.log(data);
            console.log(saldo);
        }, "json");
        $.get( "http://localhost:9000/Application/getJornada", function( data ) {
            $.each(data, function (index, element) {
                var id = element.id;
                var local = element.local;
                var visitante = element.visitante;
                var fecha = element.fecha;
                var cuota_1 = element.cuota_1;
                var cuota_2 = element.cuota_2;
                var cuota_X = element.cuota_X;
                var insertion = "<tr><td>" + id + "</td><td>" + fecha + "</td><td> " + local + "</td><td>" + visitante + "</td><td>" + cuota_1 + "</td><td>" + cuota_2 + "</td><td>" + cuota_X + "</td></tr>";
                $("#tabla_jornada tbody").append(insertion);
            });
        }, "json" );
        $("#mybetsbutton").click(function () {
            var tabla = document.getElementById('mybets_container');
            tabla.style.display="block";
            var crear = document.getElementById('create_container');
            crear.style.display="none";
            $('#mybets_tabla tbody tr').remove();
            $.get("http://localhost:9000/Application/getApuestas", function (data) {
                $.each(data, function (index, element) {
                    var id = element.id;
                    var idPartido = element.idPartido;
                    var pronostico = element.pronostico;
                    var importe = element.importe;
                    console.log("apuestas:",data);
                    var insertion = "<tr class=\"bg-info\"><td>" + idPartido + "</td><td>" + pronostico + "</td><td> " + importe + "</td></tr>";
                    $("#mybets_tabla tbody").append(insertion);
                });
            }, "json");
        })
        $("#create_bet").click(function () {
            var tabla = document.getElementById('mybets_container');
            tabla.style.display = "none";
            var crear = document.getElementById('create_container');
            crear.style.display = "block";
        })
        $("#create_bet_button").click(function(){
            var idPartido = $("#matchId_field").val();
            var amount = $("#amount_field").val();
            var radioValue = $("input[name='optradio']:checked").val();
            alert(idPartido+","+amount+","+radioValue);
            $.get("http://localhost:9000/Application/createBet?idPartido="+idPartido+"&importe="+amount+"&pronostico="+radioValue, function (data) {
                alert(data);
            });
        });
    })
</script>
</html>